(function(h,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("react"),require("@blocknote/core"),require("@mantine/core"),require("@tiptap/react"),require("use-prefers-color-scheme"),require("lodash"),require("@tippyjs/react"),require("tippy.js")):typeof define=="function"&&define.amd?define(["exports","react","@blocknote/core","@mantine/core","@tiptap/react","use-prefers-color-scheme","lodash","@tippyjs/react","tippy.js"],l):(h=typeof globalThis<"u"?globalThis:h||self,l(h["blocknote-react"]={},h.React,h.core,h.core$1,h.react,h.usePrefersColorScheme,h._,h.Tippy,h.tippy_js))})(this,function(h,l,w,v,ne,Ot,At,Pt,Ft){"use strict";const ue=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function Lt(e){if(e&&typeof e=="object"&&"default"in e)return e;const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const i=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,i.get?i:{enumerable:!0,get:()=>e[o]})}}return n.default=e,Object.freeze(n)}const O=ue(l),Nt=ue(Ot),_=Lt(At),V=ue(Pt);var de={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe;function Vt(){if(pe)return J;pe=1;var e=O.default,n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,f=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(g,d,S){var m,E={},D=null,W=null;S!==void 0&&(D=""+S),d.key!==void 0&&(D=""+d.key),d.ref!==void 0&&(W=d.ref);for(m in d)i.call(d,m)&&!s.hasOwnProperty(m)&&(E[m]=d[m]);if(g&&g.defaultProps)for(m in d=g.defaultProps,d)E[m]===void 0&&(E[m]=d[m]);return{$$typeof:n,type:g,key:D,ref:W,props:E,_owner:f.current}}return J.Fragment=o,J.jsx=u,J.jsxs=u,J}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we;function Ut(){return we||(we=1,process.env.NODE_ENV!=="production"&&function(){var e=O.default,n=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),g=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),N=Symbol.iterator,oe="@@iterator";function Rn(t){if(t===null||typeof t!="object")return null;var a=N&&t[N]||t[oe];return typeof a=="function"?a:null}var Y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function H(t){{for(var a=arguments.length,c=new Array(a>1?a-1:0),b=1;b<a;b++)c[b-1]=arguments[b];In("error",t,c)}}function In(t,a,c){{var b=Y.ReactDebugCurrentFrame,C=b.getStackAddendum();C!==""&&(a+="%s",c=c.concat([C]));var T=c.map(function(k){return String(k)});T.unshift("Warning: "+a),Function.prototype.apply.call(console[t],console,T)}}var Dn=!1,On=!1,An=!1,Pn=!1,Fn=!1,ft;ft=Symbol.for("react.module.reference");function Ln(t){return!!(typeof t=="string"||typeof t=="function"||t===i||t===s||Fn||t===f||t===S||t===m||Pn||t===W||Dn||On||An||typeof t=="object"&&t!==null&&(t.$$typeof===D||t.$$typeof===E||t.$$typeof===u||t.$$typeof===g||t.$$typeof===d||t.$$typeof===ft||t.getModuleId!==void 0))}function Nn(t,a,c){var b=t.displayName;if(b)return b;var C=a.displayName||a.name||"";return C!==""?c+"("+C+")":c}function gt(t){return t.displayName||"Context"}function A(t){if(t==null)return null;if(typeof t.tag=="number"&&H("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case i:return"Fragment";case o:return"Portal";case s:return"Profiler";case f:return"StrictMode";case S:return"Suspense";case m:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g:var a=t;return gt(a)+".Consumer";case u:var c=t;return gt(c._context)+".Provider";case d:return Nn(t,t.render,"ForwardRef");case E:var b=t.displayName||null;return b!==null?b:A(t.type)||"Memo";case D:{var C=t,T=C._payload,k=C._init;try{return A(k(T))}catch{return null}}}return null}var q=Object.assign,ee=0,ht,vt,bt,mt,xt,kt,yt;function Ct(){}Ct.__reactDisabledLog=!0;function Vn(){{if(ee===0){ht=console.log,vt=console.info,bt=console.warn,mt=console.error,xt=console.group,kt=console.groupCollapsed,yt=console.groupEnd;var t={configurable:!0,enumerable:!0,value:Ct,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}ee++}}function Un(){{if(ee--,ee===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:q({},t,{value:ht}),info:q({},t,{value:vt}),warn:q({},t,{value:bt}),error:q({},t,{value:mt}),group:q({},t,{value:xt}),groupCollapsed:q({},t,{value:kt}),groupEnd:q({},t,{value:yt})})}ee<0&&H("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ke=Y.ReactCurrentDispatcher,ye;function ie(t,a,c){{if(ye===void 0)try{throw Error()}catch(C){var b=C.stack.trim().match(/\n( *(at )?)/);ye=b&&b[1]||""}return`
`+ye+t}}var Ce=!1,ae;{var Wn=typeof WeakMap=="function"?WeakMap:Map;ae=new Wn}function St(t,a){if(!t||Ce)return"";{var c=ae.get(t);if(c!==void 0)return c}var b;Ce=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var T;T=ke.current,ke.current=null,Vn();try{if(a){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(P){b=P}Reflect.construct(t,[],k)}else{try{k.call()}catch(P){b=P}t.call(k.prototype)}}else{try{throw Error()}catch(P){b=P}t()}}catch(P){if(P&&b&&typeof P.stack=="string"){for(var x=P.stack.split(`
`),z=b.stack.split(`
`),j=x.length-1,p=z.length-1;j>=1&&p>=0&&x[j]!==z[p];)p--;for(;j>=1&&p>=0;j--,p--)if(x[j]!==z[p]){if(j!==1||p!==1)do if(j--,p--,p<0||x[j]!==z[p]){var B=`
`+x[j].replace(" at new "," at ");return t.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",t.displayName)),typeof t=="function"&&ae.set(t,B),B}while(j>=1&&p>=0);break}}}finally{Ce=!1,ke.current=T,Un(),Error.prepareStackTrace=C}var K=t?t.displayName||t.name:"",Dt=K?ie(K):"";return typeof t=="function"&&ae.set(t,Dt),Dt}function qn(t,a,c){return St(t,!1)}function Yn(t){var a=t.prototype;return!!(a&&a.isReactComponent)}function le(t,a,c){if(t==null)return"";if(typeof t=="function")return St(t,Yn(t));if(typeof t=="string")return ie(t);switch(t){case S:return ie("Suspense");case m:return ie("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case d:return qn(t.render);case E:return le(t.type,a,c);case D:{var b=t,C=b._payload,T=b._init;try{return le(T(C),a,c)}catch{}}}return""}var se=Object.prototype.hasOwnProperty,Tt={},Mt=Y.ReactDebugCurrentFrame;function ce(t){if(t){var a=t._owner,c=le(t.type,t._source,a?a.type:null);Mt.setExtraStackFrame(c)}else Mt.setExtraStackFrame(null)}function Gn(t,a,c,b,C){{var T=Function.call.bind(se);for(var k in t)if(T(t,k)){var x=void 0;try{if(typeof t[k]!="function"){var z=Error((b||"React class")+": "+c+" type `"+k+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[k]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw z.name="Invariant Violation",z}x=t[k](a,k,b,c,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(j){x=j}x&&!(x instanceof Error)&&(ce(C),H("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",b||"React class",c,k,typeof x),ce(null)),x instanceof Error&&!(x.message in Tt)&&(Tt[x.message]=!0,ce(C),H("Failed %s type: %s",c,x.message),ce(null))}}}var Kn=Array.isArray;function Se(t){return Kn(t)}function Jn(t){{var a=typeof Symbol=="function"&&Symbol.toStringTag,c=a&&t[Symbol.toStringTag]||t.constructor.name||"Object";return c}}function Xn(t){try{return jt(t),!1}catch{return!0}}function jt(t){return""+t}function Et(t){if(Xn(t))return H("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Jn(t)),jt(t)}var te=Y.ReactCurrentOwner,Zn={key:!0,ref:!0,__self:!0,__source:!0},pt,wt,Te;Te={};function Qn(t){if(se.call(t,"ref")){var a=Object.getOwnPropertyDescriptor(t,"ref").get;if(a&&a.isReactWarning)return!1}return t.ref!==void 0}function $n(t){if(se.call(t,"key")){var a=Object.getOwnPropertyDescriptor(t,"key").get;if(a&&a.isReactWarning)return!1}return t.key!==void 0}function er(t,a){if(typeof t.ref=="string"&&te.current&&a&&te.current.stateNode!==a){var c=A(te.current.type);Te[c]||(H('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',A(te.current.type),t.ref),Te[c]=!0)}}function tr(t,a){{var c=function(){pt||(pt=!0,H("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};c.isReactWarning=!0,Object.defineProperty(t,"key",{get:c,configurable:!0})}}function nr(t,a){{var c=function(){wt||(wt=!0,H("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",a))};c.isReactWarning=!0,Object.defineProperty(t,"ref",{get:c,configurable:!0})}}var rr=function(t,a,c,b,C,T,k){var x={$$typeof:n,type:t,key:a,ref:c,props:k,_owner:T};return x._store={},Object.defineProperty(x._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(x,"_self",{configurable:!1,enumerable:!1,writable:!1,value:b}),Object.defineProperty(x,"_source",{configurable:!1,enumerable:!1,writable:!1,value:C}),Object.freeze&&(Object.freeze(x.props),Object.freeze(x)),x};function or(t,a,c,b,C){{var T,k={},x=null,z=null;c!==void 0&&(Et(c),x=""+c),$n(a)&&(Et(a.key),x=""+a.key),Qn(a)&&(z=a.ref,er(a,C));for(T in a)se.call(a,T)&&!Zn.hasOwnProperty(T)&&(k[T]=a[T]);if(t&&t.defaultProps){var j=t.defaultProps;for(T in j)k[T]===void 0&&(k[T]=j[T])}if(x||z){var p=typeof t=="function"?t.displayName||t.name||"Unknown":t;x&&tr(k,p),z&&nr(k,p)}return rr(t,x,z,C,b,te.current,k)}}var Me=Y.ReactCurrentOwner,Ht=Y.ReactDebugCurrentFrame;function G(t){if(t){var a=t._owner,c=le(t.type,t._source,a?a.type:null);Ht.setExtraStackFrame(c)}else Ht.setExtraStackFrame(null)}var je;je=!1;function Ee(t){return typeof t=="object"&&t!==null&&t.$$typeof===n}function zt(){{if(Me.current){var t=A(Me.current.type);if(t)return`

Check the render method of \``+t+"`."}return""}}function ir(t){{if(t!==void 0){var a=t.fileName.replace(/^.*[\\\/]/,""),c=t.lineNumber;return`

Check your code at `+a+":"+c+"."}return""}}var Bt={};function ar(t){{var a=zt();if(!a){var c=typeof t=="string"?t:t.displayName||t.name;c&&(a=`

Check the top-level render call using <`+c+">.")}return a}}function _t(t,a){{if(!t._store||t._store.validated||t.key!=null)return;t._store.validated=!0;var c=ar(a);if(Bt[c])return;Bt[c]=!0;var b="";t&&t._owner&&t._owner!==Me.current&&(b=" It was passed a child from "+A(t._owner.type)+"."),G(t),H('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',c,b),G(null)}}function Rt(t,a){{if(typeof t!="object")return;if(Se(t))for(var c=0;c<t.length;c++){var b=t[c];Ee(b)&&_t(b,a)}else if(Ee(t))t._store&&(t._store.validated=!0);else if(t){var C=Rn(t);if(typeof C=="function"&&C!==t.entries)for(var T=C.call(t),k;!(k=T.next()).done;)Ee(k.value)&&_t(k.value,a)}}}function lr(t){{var a=t.type;if(a==null||typeof a=="string")return;var c;if(typeof a=="function")c=a.propTypes;else if(typeof a=="object"&&(a.$$typeof===d||a.$$typeof===E))c=a.propTypes;else return;if(c){var b=A(a);Gn(c,t.props,"prop",b,t)}else if(a.PropTypes!==void 0&&!je){je=!0;var C=A(a);H("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",C||"Unknown")}typeof a.getDefaultProps=="function"&&!a.getDefaultProps.isReactClassApproved&&H("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function sr(t){{for(var a=Object.keys(t.props),c=0;c<a.length;c++){var b=a[c];if(b!=="children"&&b!=="key"){G(t),H("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",b),G(null);break}}t.ref!==null&&(G(t),H("Invalid attribute `ref` supplied to `React.Fragment`."),G(null))}}function It(t,a,c,b,C,T){{var k=Ln(t);if(!k){var x="";(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(x+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var z=ir(C);z?x+=z:x+=zt();var j;t===null?j="null":Se(t)?j="array":t!==void 0&&t.$$typeof===n?(j="<"+(A(t.type)||"Unknown")+" />",x=" Did you accidentally export a JSX literal instead of a component?"):j=typeof t,H("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",j,x)}var p=or(t,a,c,C,T);if(p==null)return p;if(k){var B=a.children;if(B!==void 0)if(b)if(Se(B)){for(var K=0;K<B.length;K++)Rt(B[K],t);Object.freeze&&Object.freeze(B)}else H("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Rt(B,t)}return t===i?sr(p):lr(p),p}}function cr(t,a,c){return It(t,a,c,!0)}function ur(t,a,c){return It(t,a,c,!1)}var dr=ur,fr=cr;X.Fragment=i,X.jsx=dr,X.jsxs=fr}()),X}process.env.NODE_ENV==="production"?de.exports=Vt():de.exports=Ut();var r=de.exports;const Z=e=>{const n=`0 4px 12px ${e.colors.shadow}`,o=`1px solid ${e.colors.border}`,i={default:e.colors.editor.text,gray:e.colors.highlightColors.gray.text,brown:e.colors.highlightColors.brown.text,red:e.colors.highlightColors.red.text,orange:e.colors.highlightColors.orange.text,yellow:e.colors.highlightColors.yellow.text,green:e.colors.highlightColors.green.text,blue:e.colors.highlightColors.blue.text,purple:e.colors.highlightColors.purple.text,pink:e.colors.highlightColors.pink.text},f={default:e.colors.editor.background,gray:e.colors.highlightColors.gray.background,brown:e.colors.highlightColors.brown.background,red:e.colors.highlightColors.red.background,orange:e.colors.highlightColors.orange.background,yellow:e.colors.highlightColors.yellow.background,green:e.colors.highlightColors.green.background,blue:e.colors.highlightColors.blue.background,purple:e.colors.highlightColors.purple.background,pink:e.colors.highlightColors.pink.background},s=`${Math.max(e.borderRadius+2,1)}px`,u=`${e.borderRadius}px`,g=`${Math.max(e.borderRadius-2,1)}px`;return{activeStyles:{transform:"none"},components:{Menu:{styles:()=>{var d;return{dropdown:_.default.merge({backgroundColor:e.colors.menu.background,border:o,borderRadius:u,boxShadow:n,color:e.colors.menu.text,padding:"2px",".mantine-Menu-label":{backgroundColor:e.colors.menu.background,color:e.colors.menu.text},".mantine-Menu-item":{backgroundColor:e.colors.menu.background,border:"none",borderRadius:g,color:e.colors.menu.text},".mantine-Menu-item[data-hovered]":{backgroundColor:e.colors.hovered.background,border:"none",color:e.colors.hovered.text}},((d=e.componentStyles)==null?void 0:d.call(e,e).Menu)||{})}}},ColorIcon:{styles:()=>{var d;return{root:_.default.merge({border:o,borderRadius:g},((d=e.componentStyles)==null?void 0:d.call(e,e).ColorIcon)||{})}}},DragHandleMenu:{styles:()=>{var d;return{root:_.default.merge({".mantine-Menu-item":{fontSize:"12px",height:"30px"}},((d=e.componentStyles)==null?void 0:d.call(e,e).DragHandleMenu)||{})}}},EditHyperlinkMenu:{styles:()=>{var d;return{root:_.default.merge({backgroundColor:e.colors.menu.background,border:o,borderRadius:u,boxShadow:n,color:e.colors.menu.text,gap:"4px",minWidth:"145px",padding:"2px",".mantine-Group-root":{flexWrap:"nowrap",gap:"8px",paddingInline:"6px",".mantine-Container-root":{color:e.colors.menu.text,display:"flex",justifyContent:"center",padding:0,width:"fit-content"},".mantine-TextInput-root":{width:"300px",".mantine-TextInput-wrapper":{".mantine-TextInput-input":{border:"none",color:e.colors.menu.text,fontSize:"12px",padding:0}}}}},((d=e.componentStyles)==null?void 0:d.call(e,e).EditHyperlinkMenu)||{})}}},Editor:{styles:()=>{var d;return{root:_.default.merge({".ProseMirror":{backgroundColor:e.colors.editor.background,borderRadius:s,color:e.colors.editor.text,fontFamily:e.fontFamily},[`.${w.blockStyles.isEmpty} .${w.blockStyles.inlineContent}:before, .${w.blockStyles.isFilter} .${w.blockStyles.inlineContent}:before`]:{color:e.colors.sideMenu},...Object.fromEntries(Object.entries(i).map(([S,m])=>[`[data-text-color="${S}"]`,{color:m}])),...Object.fromEntries(Object.entries(f).map(([S,m])=>[`[data-background-color="${S}"]`,{backgroundColor:m}]))},((d=e.componentStyles)==null?void 0:d.call(e,e).Editor)||{})}}},Toolbar:{styles:()=>{var d;return{root:_.default.merge({backgroundColor:e.colors.menu.background,boxShadow:n,border:o,borderRadius:u,flexWrap:"nowrap",gap:"2px",padding:"2px",width:"fit-content",".mantine-UnstyledButton-root":{backgroundColor:e.colors.menu.background,border:"none",borderRadius:g,color:e.colors.menu.text},".mantine-UnstyledButton-root:hover":{backgroundColor:e.colors.hovered.background,border:"none",color:e.colors.hovered.text},".mantine-UnstyledButton-root[data-selected]":{backgroundColor:e.colors.selected.background,border:"none",color:e.colors.selected.text},".mantine-UnstyledButton-root[data-disabled]":{backgroundColor:e.colors.disabled.background,border:"none",color:e.colors.disabled.text},".mantine-Menu-dropdown":{".mantine-Menu-item":{fontSize:"12px",height:"30px",".mantine-Menu-itemRightSection":{paddingLeft:"5px"}},".mantine-Menu-item:hover":{backgroundColor:e.colors.hovered.background}}},((d=e.componentStyles)==null?void 0:d.call(e,e).Toolbar)||{})}}},Tooltip:{styles:()=>{var d;return{root:_.default.merge({backgroundColor:e.colors.tooltip.background,border:o,borderRadius:u,boxShadow:n,color:e.colors.tooltip.text,padding:"4px 10px",textAlign:"center","div ~ div":{color:e.colors.tooltip.text}},((d=e.componentStyles)==null?void 0:d.call(e,e).Tooltip)||{})}}},SlashMenu:{styles:()=>{var d;return{root:_.default.merge({position:"relative",".mantine-Menu-item":{".mantine-Menu-itemIcon":{backgroundColor:e.colors.tooltip.background,borderRadius:g,color:e.colors.tooltip.text,padding:"8px"},".mantine-Menu-itemLabel":{paddingRight:"16px",".mantine-Stack-root":{gap:"0"}},".mantine-Menu-itemRightSection":{".mantine-Badge-root":{backgroundColor:e.colors.tooltip.background,color:e.colors.tooltip.text}}}},((d=e.componentStyles)==null?void 0:d.call(e,e).SlashMenu)||{})}}},SideMenu:{styles:()=>{var d;return{root:_.default.merge({backgroundColor:"transparent",".mantine-UnstyledButton-root":{backgroundColor:"transparent",color:e.colors.sideMenu},".mantine-UnstyledButton-root:hover":{backgroundColor:e.colors.hovered.background}},((d=e.componentStyles)==null?void 0:d.call(e,e).SideMenu)||{})}}}},fontFamily:e.fontFamily,other:{textColors:i,backgroundColors:f}}},fe=l.forwardRef((e,n)=>{const{classes:o}=v.createStyles({root:{}})(void 0,{name:"Toolbar"});return r.jsx(v.Group,{className:e.className?`${o.root} ${e.className}`:o.root,ref:n,...e,children:e.children})});var He={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ze=O.default.createContext&&O.default.createContext(He),F=globalThis&&globalThis.__assign||function(){return F=Object.assign||function(e){for(var n,o=1,i=arguments.length;o<i;o++){n=arguments[o];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(e[f]=n[f])}return e},F.apply(this,arguments)},Wt=globalThis&&globalThis.__rest||function(e,n){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,i=Object.getOwnPropertySymbols(e);f<i.length;f++)n.indexOf(i[f])<0&&Object.prototype.propertyIsEnumerable.call(e,i[f])&&(o[i[f]]=e[i[f]]);return o};function Be(e){return e&&e.map(function(n,o){return O.default.createElement(n.tag,F({key:o},n.attr),Be(n.child))})}function M(e){return function(n){return O.default.createElement(qt,F({attr:F({},e.attr)},n),Be(e.child))}}function qt(e){var n=function(o){var i=e.attr,f=e.size,s=e.title,u=Wt(e,["attr","size","title"]),g=f||o.size||"1em",d;return o.className&&(d=o.className),e.className&&(d=(d?d+" ":"")+e.className),O.default.createElement("svg",F({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,i,u,{className:d,style:F(F({color:e.color||o.color},o.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),s&&O.default.createElement("title",null,s),e.children)};return ze!==void 0?O.default.createElement(ze.Consumer,null,function(o){return n(o)}):n(He)}function Yt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M23 12l-7.071 7.071-1.414-1.414L20.172 12l-5.657-5.657 1.414-1.414L23 12zM3.828 12l5.657 5.657-1.414 1.414L1 12l7.071-7.071 1.414 1.414L3.828 12z"}}]}]})(e)}function Gt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z"}}]}]})(e)}function Kt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm0-5h18v2H3v-2zm0-5h18v2H3V9z"}}]}]})(e)}function Jt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z"}}]}]})(e)}function Xt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z"}}]}]})(e)}function Zt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"}}]}]})(e)}function _e(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M13 20h-2v-7H4v7H2V4h2v7h7V4h2v16zm8-12v12h-2v-9.796l-2 .536V8.67L19.5 8H21z"}}]}]})(e)}function Re(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M4 4v7h7V4h2v16h-2v-7H4v7H2V4h2zm14.5 4c2.071 0 3.75 1.679 3.75 3.75 0 .857-.288 1.648-.772 2.28l-.148.18L18.034 18H22v2h-7v-1.556l4.82-5.546c.268-.307.43-.709.43-1.148 0-.966-.784-1.75-1.75-1.75-.918 0-1.671.707-1.744 1.606l-.006.144h-2C14.75 9.679 16.429 8 18.5 8z"}}]}]})(e)}function Ie(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M22 8l-.002 2-2.505 2.883c1.59.435 2.757 1.89 2.757 3.617 0 2.071-1.679 3.75-3.75 3.75-1.826 0-3.347-1.305-3.682-3.033l1.964-.382c.156.806.866 1.415 1.718 1.415.966 0 1.75-.784 1.75-1.75s-.784-1.75-1.75-1.75c-.286 0-.556.069-.794.19l-1.307-1.547L19.35 10H15V8h7zM4 4v7h7V4h2v16h-2v-7H4v7H2V4h2z"}}]}]})(e)}function Qt(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-8 3.5L7 9v7l-4-3.5z"}}]}]})(e)}function $t(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 4h18v2H3V4zm0 15h18v2H3v-2zm8-5h10v2H11v-2zm0-5h10v2H11V9zm-4 3.5L3 16V9l4 3.5z"}}]}]})(e)}function en(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15 20H7v-2h2.927l2.116-12H9V4h8v2h-2.927l-2.116 12H15z"}}]}]})(e)}function tn(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 17h5v2h-3v3h-2v-5zM7 7H2V5h3V2h2v5zm11.364 8.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"}}]}]})(e)}function De(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.364 15.536L16.95 14.12l1.414-1.414a5 5 0 1 0-7.071-7.071L9.879 7.05 8.464 5.636 9.88 4.222a7 7 0 0 1 9.9 9.9l-1.415 1.414zm-2.828 2.828l-1.415 1.414a7 7 0 0 1-9.9-9.9l1.415-1.414L7.05 9.88l-1.414 1.414a5 5 0 1 0 7.071 7.071l1.414-1.414 1.415 1.414zm-.708-10.607l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07z"}}]}]})(e)}function Oe(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 4h13v2H8V4zM5 3v3h1v1H3V6h1V4H3V3h2zM3 14v-2.5h2V11H3v-1h3v2.5H4v.5h2v1H3zm2 5.5H3v-1h2V18H3v-1h3v4H3v-1h2v-.5zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"}}]}]})(e)}function Ae(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"}}]}]})(e)}function nn(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.154 14c.23.516.346 1.09.346 1.72 0 1.342-.524 2.392-1.571 3.147C14.88 19.622 13.433 20 11.586 20c-1.64 0-3.263-.381-4.87-1.144V16.6c1.52.877 3.075 1.316 4.666 1.316 2.551 0 3.83-.732 3.839-2.197a2.21 2.21 0 0 0-.648-1.603l-.12-.117H3v-2h18v2h-3.846zm-4.078-3H7.629a4.086 4.086 0 0 1-.481-.522C6.716 9.92 6.5 9.246 6.5 8.452c0-1.236.466-2.287 1.397-3.153C8.83 4.433 10.271 4 12.222 4c1.471 0 2.879.328 4.222.984v2.152c-1.2-.687-2.515-1.03-3.946-1.03-2.48 0-3.719.782-3.719 2.346 0 .42.218.786.654 1.099.436.313.974.562 1.613.75.62.18 1.297.414 2.03.699z"}}]}]})(e)}function ge(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 6v15h-2V6H5V4h14v2z"}}]}]})(e)}function rn(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 3v9a4 4 0 1 0 8 0V3h2v9a6 6 0 1 1-12 0V3h2zM4 20h16v2H4v-2z"}}]}]})(e)}function on(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 6v2H5v11h11v-5h2v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm11-3v9l-3.794-3.793-5.999 6-1.414-1.414 5.999-6L12 3h9z"}}]}]})(e)}function he(e){return M({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.972 6.251c-.967-.538-2.185-.188-2.72.777l-3.713 6.682-2.125-2.125c-.781-.781-2.047-.781-2.828 0-.781.781-.781 2.047 0 2.828l4 4c.378.379.888.587 1.414.587l.277-.02c.621-.087 1.166-.46 1.471-1.009l5-9c.537-.966.189-2.183-.776-2.72z"}}]})(e)}function an(e){const n=e.icon;return r.jsx(v.Menu.Item,{onClick:e.onClick,icon:n&&r.jsx(n,{size:16}),rightSection:e.isSelected?r.jsx(he,{size:16}):r.jsx("div",{style:{width:"16px",padding:"0"}}),disabled:e.isDisabled,children:e.text},e.text)}function ln(e){return M({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function sn(e){return M({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}}]})(e)}const cn=l.forwardRef((e,n)=>{const o=e.icon;return r.jsx(v.Button,{leftIcon:o&&r.jsx(o,{size:16}),rightIcon:r.jsx(ln,{}),size:"xs",variant:"subtle",disabled:e.isDisabled,onClick:e.onClick,ref:n,children:e.text})});function Pe(e){const n=e.items.filter(o=>o.isSelected)[0];return n?r.jsxs(v.Menu,{exitTransitionDuration:0,disabled:e.isDisabled,children:[r.jsx(v.Menu.Target,{children:r.jsx(cn,{text:n.text,icon:n.icon,isDisabled:n.isDisabled})}),r.jsx(v.Menu.Dropdown,{children:e.items.map(o=>r.jsx(an,{...o},o.text))})]}):null}function L(e,n){l.useEffect(()=>(e._tiptapEditor.on("selectionUpdate",n),()=>{e._tiptapEditor.off("selectionUpdate",n)}),[n,e._tiptapEditor])}function U(e,n){l.useEffect(()=>(e._tiptapEditor.on("update",n),()=>{e._tiptapEditor.off("update",n)}),[n,e._tiptapEditor])}const Fe=[{name:"Paragraph",type:"paragraph",icon:ge},{name:"Heading 1",type:"heading",props:{level:"1"},icon:_e},{name:"Heading 2",type:"heading",props:{level:"2"},icon:Re},{name:"Heading 3",type:"heading",props:{level:"3"},icon:Ie},{name:"Bullet List",type:"bulletListItem",icon:Ae},{name:"Numbered List",type:"numberedListItem",icon:Oe}],Le=e=>{const[n,o]=l.useState(e.editor.getTextCursorPosition().block),i=l.useMemo(()=>(e.items||Fe).filter(u=>{if(!(u.type in e.editor.schema))return!1;for(const[g,d]of Object.entries(u.props||{})){const S=e.editor.schema[u.type].propSchema;if(!(g in S)||S[g].values!==void 0&&!S[g].values.includes(d))return!1}return!0}),[e.editor,e.items]),f=l.useMemo(()=>i.find(u=>u.type===n.type)!==void 0,[n.type,i]),s=l.useMemo(()=>i.map(u=>({text:u.name,icon:u.icon,onClick:()=>{e.editor.focus(),e.editor.updateBlock(n,{type:u.type,props:{}})},isSelected:n.type===u.type})),[n,i,e.editor]);return U(e.editor,()=>{o(e.editor.getTextCursorPosition().block)}),L(e.editor,()=>{o(e.editor.getTextCursorPosition().block)}),f?r.jsx(Pe,{items:s}):null},Ne=e=>{const{classes:n}=v.createStyles({root:{}})(void 0,{name:"Tooltip"});return r.jsxs(v.Stack,{spacing:0,className:n.root,children:[r.jsx(v.Text,{size:"sm",children:e.mainTooltip}),e.secondaryTooltip&&r.jsx(v.Text,{size:"xs",children:e.secondaryTooltip})]})},R=l.forwardRef((e,n)=>{const o=e.icon;return r.jsx(V.default,{content:r.jsx(Ne,{mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip}),trigger:"mouseenter",children:e.children?r.jsxs(v.Button,{onClick:e.onClick,"data-selected":e.isSelected?"true":void 0,"data-test":e.mainTooltip.slice(0,1).toLowerCase()+e.mainTooltip.replace(/\s+/g,"").slice(1),size:"xs",disabled:e.isDisabled||!1,ref:n,children:[o&&r.jsx(o,{}),e.children]}):r.jsx(v.ActionIcon,{onClick:e.onClick,"data-selected":e.isSelected?"true":void 0,"data-test":e.mainTooltip.slice(0,1).toLowerCase()+e.mainTooltip.replace(/\s+/g,"").slice(1),size:30,disabled:e.isDisabled||!1,ref:n,children:o&&r.jsx(o,{})})})}),un=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function I(e){return un()?e.replace("Mod","⌘"):e.replace("Mod","Ctrl")}const dn={bold:"Mod+B",italic:"Mod+I",underline:"Mod+U",strike:"Mod+Shift+X",code:""},fn={bold:Zt,italic:en,underline:rn,strike:nn,code:Yt},Q=e=>{const[n,o]=l.useState(e.toggledStyle in e.editor.getActiveStyles());U(e.editor,()=>{o(e.toggledStyle in e.editor.getActiveStyles())}),L(e.editor,()=>{o(e.toggledStyle in e.editor.getActiveStyles())});const i=f=>{e.editor.focus(),e.editor.toggleStyles({[f]:!0})};return r.jsx(R,{onClick:()=>i(e.toggledStyle),isSelected:n,mainTooltip:e.toggledStyle.slice(0,1).toUpperCase()+e.toggledStyle.slice(1),secondaryTooltip:I(dn[e.toggledStyle]),icon:fn[e.toggledStyle]})},gn={left:Jt,center:Gt,right:Xt,justify:Kt},re=e=>{const[n,o]=l.useState(()=>{const s=e.editor.getTextCursorPosition().block;if("textAlignment"in s.props)return s.props.textAlignment});U(e.editor,()=>{const s=e.editor.getTextCursorPosition().block;"textAlignment"in s.props&&o(s.props.textAlignment)}),L(e.editor,()=>{const s=e.editor.getTextCursorPosition().block;"textAlignment"in s.props&&o(s.props.textAlignment)});const i=l.useMemo(()=>{const s=e.editor.getSelection();if(s){for(const u of s.blocks)if(!("textAlignment"in u.props))return!1}else if(!("textAlignment"in e.editor.getTextCursorPosition().block.props))return!1;return!0},[e.editor]),f=l.useCallback(s=>{e.editor.focus();const u=e.editor.getSelection();if(u)for(const g of u.blocks)e.editor.updateBlock(g,{props:{textAlignment:s}});else{const g=e.editor.getTextCursorPosition().block;e.editor.updateBlock(g,{props:{textAlignment:s}})}},[e.editor]);return i?r.jsx(R,{onClick:()=>f(e.textAlignment),isSelected:n===e.textAlignment,mainTooltip:e.textAlignment==="justify"?"Justify Text":"Align Text "+e.textAlignment.slice(0,1).toUpperCase()+e.textAlignment.slice(1),icon:gn[e.textAlignment]}):null},ve=e=>{const{classes:n}=v.createStyles({root:{}})(void 0,{name:"ColorIcon"}),o=e.textColor||"default",i=e.backgroundColor||"default",f=e.size||16;return r.jsx(v.Box,{className:n.root,sx:s=>({backgroundColor:s.other.backgroundColors[i],color:s.other.textColors[o],fontSize:(f*.75).toString()+"px",height:f.toString()+"px",lineHeight:f.toString()+"px",textAlign:"center",width:f.toString()+"px"}),children:"A"})},Ve=e=>r.jsxs(r.Fragment,{children:[r.jsx(v.Menu.Label,{children:"Text"}),["default","gray","brown","red","orange","yellow","green","blue","purple","pink"].map(n=>r.jsx(v.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.setTextColor(n)},component:"div","data-test":"text-color-"+n,icon:r.jsx(ve,{textColor:n,size:e.iconSize}),rightSection:e.textColor===n?r.jsx(he,{size:16,style:{paddingLeft:"8px"}}):r.jsx("div",{style:{width:"24px",padding:"0"}}),children:n.charAt(0).toUpperCase()+n.slice(1)},"text-color-"+n)),r.jsx(v.Menu.Label,{children:"Background"}),["default","gray","brown","red","orange","yellow","green","blue","purple","pink"].map(n=>r.jsx(v.Menu.Item,{onClick:()=>{e.onClick&&e.onClick(),e.setBackgroundColor(n)},component:"div","data-test":"background-color-"+n,icon:r.jsx(ve,{backgroundColor:n,size:e.iconSize}),rightSection:e.backgroundColor===n?r.jsx(he,{size:16,style:{paddingLeft:"8px"}}):r.jsx("div",{style:{width:"24px",padding:"0"}}),children:n.charAt(0).toUpperCase()+n.slice(1)},"background-color-"+n))]}),Ue=e=>{const[n,o]=l.useState(e.editor.getActiveStyles().textColor||"default"),[i,f]=l.useState(e.editor.getActiveStyles().backgroundColor||"default");U(e.editor,()=>{o(e.editor.getActiveStyles().textColor||"default"),f(e.editor.getActiveStyles().backgroundColor||"default")}),L(e.editor,()=>{o(e.editor.getActiveStyles().textColor||"default"),f(e.editor.getActiveStyles().backgroundColor||"default")});const s=l.useCallback(g=>{e.editor.focus(),g==="default"?e.editor.removeStyles({textColor:g}):e.editor.addStyles({textColor:g})},[e.editor]),u=l.useCallback(g=>{e.editor.focus(),g==="default"?e.editor.removeStyles({backgroundColor:g}):e.editor.addStyles({backgroundColor:g})},[e.editor]);return r.jsxs(v.Menu,{children:[r.jsx(v.Menu.Target,{children:r.jsx(R,{mainTooltip:"Colors",icon:()=>r.jsx(ve,{textColor:n,backgroundColor:i,size:20})})}),r.jsx(v.Menu.Dropdown,{children:r.jsx(Ve,{textColor:n,setTextColor:s,backgroundColor:i,setBackgroundColor:u})})]})},We=e=>{const[n,o]=l.useState();U(e.editor,()=>{o(e.editor.canNestBlock())}),L(e.editor,()=>{o(e.editor.canNestBlock())});const i=l.useCallback(()=>{e.editor.focus(),e.editor.nestBlock()},[e.editor]);return r.jsx(R,{onClick:i,isDisabled:!n,mainTooltip:"Nest Block",secondaryTooltip:I("Tab"),icon:$t})},qe=e=>{const[n,o]=l.useState();U(e.editor,()=>{o(e.editor.canUnnestBlock())}),L(e.editor,()=>{o(e.editor.canUnnestBlock())});const i=l.useCallback(()=>{e.editor.focus(),e.editor.unnestBlock()},[e]);return r.jsx(R,{onClick:i,isDisabled:!n,mainTooltip:"Unnest Block",secondaryTooltip:I("Shift+Tab"),icon:Qt})};function hn(e){const n=e.icon;return r.jsx(V.default,{content:r.jsx(Ne,{mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip}),placement:"left",children:r.jsx(v.Container,{children:r.jsx(n,{size:16})})})}function vn(e){function n(o){o.key==="Enter"&&(o.preventDefault(),e.onSubmit())}return r.jsx(v.TextInput,{autoFocus:e.autofocus,size:"xs",value:e.value,onChange:o=>e.onChange(o.currentTarget.value),onKeyDown:n,placeholder:e.placeholder})}function Ye(e){return r.jsxs(v.Group,{children:[r.jsx(hn,{icon:e.icon,mainTooltip:e.mainIconTooltip,secondaryTooltip:e.secondaryIconTooltip}),r.jsx(vn,{autofocus:e.autofocus,placeholder:e.placeholder,value:e.value,onChange:e.onChange,onSubmit:e.onSubmit})]})}const Ge=l.forwardRef(({url:e,text:n,update:o,className:i,...f},s)=>{const{classes:u}=v.createStyles({root:{}})(void 0,{name:"EditHyperlinkMenu"}),[g,d]=l.useState(e),[S,m]=l.useState(n);return r.jsxs(v.Stack,{...f,className:i?`${u.root} ${i}`:u.root,ref:s,children:[r.jsx(Ye,{icon:De,mainIconTooltip:"Edit URL",autofocus:!0,placeholder:"Edit URL",value:g,onChange:E=>d(E),onSubmit:()=>o(g,S)}),r.jsx(Ye,{icon:ge,mainIconTooltip:"Edit Title",placeholder:"Edit Title",value:S,onChange:E=>m(E),onSubmit:()=>o(e,S)})]})}),bn=e=>{const[n,o]=l.useState(),[i,f]=l.useState(!1),s=l.useRef(null),u=l.useRef(null),g=l.useCallback(()=>{o(r.jsx(Ge,{url:e.activeHyperlinkUrl,text:e.activeHyperlinkText,update:(S,m)=>{e.setHyperlink(S,m),f(!1)},ref:u},Math.random()+""))},[e]),d=l.useCallback(S=>{var m,E;if((m=s.current)!=null&&m.contains(S.target)){f(!i);return}(E=u.current)!=null&&E.contains(S.target)||f(!1)},[i]);return l.useEffect(()=>(document.body.addEventListener("click",d),()=>document.body.removeEventListener("click",d)),[d]),r.jsx(V.default,{content:n,onShow:g,interactive:!0,maxWidth:500,visible:i,children:r.jsx(R,{isSelected:e.isSelected,mainTooltip:e.mainTooltip,secondaryTooltip:e.secondaryTooltip,icon:e.icon,ref:s})})},Ke=e=>{const[n,o]=l.useState(e.editor.getSelectedLinkUrl()||""),[i,f]=l.useState(e.editor.getSelectedText()||"");L(e.editor,()=>{f(e.editor.getSelectedText()||""),o(e.editor.getSelectedLinkUrl()||"")});const s=l.useCallback((u,g)=>{e.editor.focus(),e.editor.createLink(u,g)},[e.editor]);return r.jsx(bn,{isSelected:!!n,mainTooltip:"Link",secondaryTooltip:I("Mod+K"),icon:De,hyperlinkIsActive:!!n,activeHyperlinkUrl:n,activeHyperlinkText:i,setHyperlink:s})},Je=e=>r.jsxs(fe,{children:[r.jsx(Le,{...e,items:e.blockTypeDropdownItems}),r.jsx(Q,{editor:e.editor,toggledStyle:"bold"}),r.jsx(Q,{editor:e.editor,toggledStyle:"italic"}),r.jsx(Q,{editor:e.editor,toggledStyle:"underline"}),r.jsx(Q,{editor:e.editor,toggledStyle:"strike"}),r.jsx(re,{editor:e.editor,textAlignment:"left"}),r.jsx(re,{editor:e.editor,textAlignment:"center"}),r.jsx(re,{editor:e.editor,textAlignment:"right"}),r.jsx(Ue,{editor:e.editor}),r.jsx(We,{editor:e.editor}),r.jsx(qe,{editor:e.editor}),r.jsx(Ke,{editor:e.editor})]}),Xe=e=>{const[n,o]=l.useState(!1),i=l.useRef();l.useEffect(()=>e.editor.formattingToolbar.onUpdate(u=>{o(u.show),i.current=u.referencePos}),[e.editor]);const f=l.useMemo(()=>{if(i)return()=>i.current},[i.current]),s=l.useMemo(()=>{const u=e.formattingToolbar||Je;return r.jsx(u,{editor:e.editor})},[e.editor,e.formattingToolbar]);return r.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:s,getReferenceClientRect:f,interactive:!0,visible:n,animation:"fade",placement:"top-start",sticky:!0,plugins:mn})},mn=[Ft.sticky],xn=e=>{const[n,o]=l.useState(!1),i=l.useRef(null);return n?r.jsx(Ge,{url:e.url,text:e.text,update:(f,s)=>e.editHyperlink(f,s),onBlur:f=>setTimeout(()=>{var s;(s=i.current)!=null&&s.contains(f.relatedTarget)||o(!1)},500),ref:i}):r.jsxs(fe,{onMouseEnter:e.stopHideTimer,onMouseLeave:e.startHideTimer,children:[r.jsx(R,{mainTooltip:"Edit",isSelected:!1,onClick:()=>o(!0),children:"Edit Link"}),r.jsx(R,{mainTooltip:"Open in new tab",isSelected:!1,onClick:()=>{window.open(e.url,"_blank")},icon:on}),r.jsx(R,{mainTooltip:"Remove link",isSelected:!1,onClick:e.deleteHyperlink,icon:tn})]})},Ze=e=>{const[n,o]=l.useState(!1),[i,f]=l.useState(),[s,u]=l.useState(),g=l.useRef();l.useEffect(()=>e.editor.hyperlinkToolbar.on("update",m=>{o(m.show),f(m.url),u(m.text),g.current=m.referencePos}),[e.editor]);const d=l.useMemo(()=>{if(g.current)return()=>g.current},[g.current]),S=l.useMemo(()=>{if(!i||!s)return null;const m=e.hyperlinkToolbar||xn;return r.jsx(m,{url:i,text:s,editHyperlink:e.editor.hyperlinkToolbar.editHyperlink,deleteHyperlink:e.editor.hyperlinkToolbar.deleteHyperlink,startHideTimer:e.editor.hyperlinkToolbar.startHideTimer,stopHideTimer:e.editor.hyperlinkToolbar.stopHideTimer})},[e.hyperlinkToolbar,e.editor,s,i]);return r.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:S,getReferenceClientRect:d,interactive:!0,visible:n,animation:"fade",placement:"top-start"})},Qe=e=>{const{classes:n}=v.createStyles({root:{}})(void 0,{name:"SideMenu"});return r.jsx(v.Group,{className:n.root,spacing:0,children:e.children})};function kn(e){return M({tag:"svg",attr:{t:"1551322312294",style:"",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M474 152m8 0l60 0q8 0 8 8l0 704q0 8-8 8l-60 0q-8 0-8-8l0-704q0-8 8-8Z"}},{tag:"path",attr:{d:"M168 474m8 0l672 0q8 0 8 8l0 60q0 8-8 8l-672 0q-8 0-8-8l0-60q0-8 8-8Z"}}]})(e)}const be=e=>r.jsx(v.ActionIcon,{size:24,children:e.children}),$e=e=>r.jsx(be,{children:r.jsx(kn,{size:24,onClick:e.addBlock,"data-test":"dragHandleAdd"})});function yn(e){return M({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(e)}const et=e=>{const{classes:n}=v.createStyles({root:{}})(void 0,{name:"DragHandleMenu"});return r.jsx(v.Menu.Dropdown,{className:n.root,children:e.children})},me=e=>{const{children:n,...o}=e;return r.jsx(v.Menu.Item,{...o,children:n})},tt=e=>r.jsx(me,{onClick:()=>e.editor.removeBlocks([e.block]),children:e.children}),nt=e=>{const[n,o]=l.useState(!1),i=l.useRef(),f=l.useCallback(()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{o(!1)},250)},[]),s=l.useCallback(()=>{i.current&&clearTimeout(i.current),o(!0)},[]);return!("textColor"in e.block.props)||!("backgroundColor"in e.block.props)?null:r.jsx(me,{onMouseLeave:f,onMouseOver:s,children:r.jsxs(v.Menu,{opened:n,position:"right",children:[r.jsx(v.Menu.Target,{children:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{style:{flex:1},children:e.children}),r.jsx(v.Box,{style:{display:"flex",alignItems:"center"},children:r.jsx(sn,{size:15})})]})}),r.jsx(v.Menu.Dropdown,{onMouseLeave:f,onMouseOver:s,style:{marginLeft:"5px"},children:r.jsx(Ve,{iconSize:18,textColor:e.block.props.textColor||"default",backgroundColor:e.block.props.backgroundColor||"default",setTextColor:u=>e.editor.updateBlock(e.block,{props:{textColor:u}}),setBackgroundColor:u=>e.editor.updateBlock(e.block,{props:{backgroundColor:u}})})})]})})},rt=e=>r.jsxs(et,{children:[r.jsx(tt,{...e,children:"Delete"}),r.jsx(nt,{...e,children:"Colors"})]}),ot=e=>{const n=e.dragHandleMenu||rt;return r.jsxs(v.Menu,{trigger:"click",onOpen:e.freezeMenu,onClose:e.unfreezeMenu,width:100,position:"left",children:[r.jsx(v.Menu.Target,{children:r.jsx("div",{draggable:"true",onDragStart:e.blockDragStart,onDragEnd:e.blockDragEnd,children:r.jsx(be,{children:r.jsx(yn,{size:24,"data-test":"dragHandle"})})})}),r.jsx(n,{editor:e.editor,block:e.block})]})},it=e=>r.jsxs(Qe,{children:[r.jsx($e,{...e}),r.jsx(ot,{...e})]}),at=e=>{const[n,o]=l.useState(!1),[i,f]=l.useState(),s=l.useRef();l.useEffect(()=>e.editor.sideMenu.onUpdate(d=>{o(d.show),f(d.block),s.current=d.referencePos}),[e.editor]);const u=l.useMemo(()=>{if(s.current)return()=>s.current},[s.current]),g=l.useMemo(()=>{if(!i)return null;const d=e.sideMenu||it;return r.jsx(d,{block:i,editor:e.editor,blockDragStart:e.editor.sideMenu.blockDragStart,blockDragEnd:e.editor.sideMenu.blockDragEnd,addBlock:e.editor.sideMenu.addBlock,freezeMenu:e.editor.sideMenu.freezeMenu,unfreezeMenu:e.editor.sideMenu.unfreezeMenu})},[i,e.editor,e.sideMenu]);return r.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:g,getReferenceClientRect:u,interactive:!0,visible:n,animation:"fade",offset:Cn,placement:"left",popperOptions:Sn})},Cn=[0,0],Sn={modifiers:[{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1}}]},Tn=5;function lt(e){const n=l.useRef(null),{classes:o}=v.createStyles({root:{}})(void 0,{name:"SuggestionListItem"});function i(){var g;const s=e.isSelected,u=(g=n.current)==null?void 0:g.matches(":hover");return s||u}function f(){var s,u;i()?(s=n.current)==null||s.setAttribute("data-hovered","true"):(u=n.current)==null||u.removeAttribute("data-hovered")}return l.useEffect(()=>{f(),i()&&n.current&&n.current.getBoundingClientRect().left>Tn&&n.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),r.jsx(v.Menu.Item,{className:o.root,icon:e.icon,onClick:e.set,closeMenuOnClick:!1,onMouseLeave:()=>{setTimeout(()=>{f()},1)},ref:n,rightSection:e.shortcut&&r.jsx(v.Badge,{size:"xs",children:e.shortcut}),children:r.jsxs(v.Stack,{children:[r.jsx(v.Text,{size:14,weight:500,children:e.name}),r.jsx(v.Text,{size:10,children:e.hint})]})})}function st(e){const{classes:n}=v.createStyles({root:{}})(void 0,{name:"SlashMenu"}),o=[];let i=0;const f=_.groupBy(e.filteredItems,s=>s.group);return _.forEach(f,s=>{o.push(r.jsx(v.Menu.Label,{children:s[0].group},s[0].group));for(const u of s)o.push(r.jsx(lt,{name:u.name,icon:u.icon,hint:u.hint,shortcut:u.shortcut,isSelected:e.keyboardHoveredItemIndex===i,set:()=>e.itemCallback(u)},u.name)),i++}),r.jsx(v.Menu,{defaultOpened:!0,trigger:"hover",closeDelay:1e7,children:r.jsx(v.Menu.Dropdown,{onMouseDown:s=>s.preventDefault(),className:n.root,children:o.length>0?o:r.jsx(v.Menu.Item,{children:"No match found"})})})}const ct=e=>{const[n,o]=l.useState(!1),[i,f]=l.useState(),[s,u]=l.useState(),g=l.useRef();l.useEffect(()=>e.editor.slashMenu.onUpdate(m=>{o(m.show),f(m.filteredItems),u(m.keyboardHoveredItemIndex),g.current=m.referencePos}),[e.editor]);const d=l.useMemo(()=>{if(g.current)return()=>g.current},[g.current]),S=l.useMemo(()=>{if(!i||s===void 0)return null;const m=e.slashMenu||st;return r.jsx(m,{filteredItems:i,itemCallback:E=>e.editor.slashMenu.itemCallback(E),keyboardHoveredItemIndex:s})},[i,s,e.editor.slashMenu,e.slashMenu]);return r.jsx(V.default,{appendTo:e.editor.domElement.parentElement,content:S,getReferenceClientRect:d,interactive:!0,visible:n,animation:"fade",placement:"bottom-start"})},y=["#FFFFFF","#EFEFEF","#CFCFCF","#AFAFAF","#7F7F7F","#3F3F3F","#1F1F1F","#161616","#0F0F0F","#000000"],$={colors:{editor:{text:y[5],background:y[0]},menu:{text:y[5],background:y[0]},tooltip:{text:y[5],background:y[1]},hovered:{text:y[5],background:y[1]},selected:{text:y[0],background:y[5]},disabled:{text:y[3],background:y[1]},shadow:y[2],border:y[1],sideMenu:y[2],highlightColors:{gray:{text:"#9b9a97",background:"#ebeced"},brown:{text:"#64473a",background:"#e9e5e3"},red:{text:"#e03e3e",background:"#fbe4e4"},orange:{text:"#d9730d",background:"#f6e9d9"},yellow:{text:"#dfab01",background:"#fbf3db"},green:{text:"#4d6461",background:"#ddedea"},blue:{text:"#0b6e99",background:"#ddebf1"},purple:{text:"#6940a5",background:"#eae4f2"},pink:{text:"#ad1a72",background:"#f4dfeb"}}},borderRadius:6,fontFamily:'"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Open Sans", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'},xe={colors:{editor:{text:y[2],background:y[6]},menu:{text:y[2],background:y[6]},tooltip:{text:y[2],background:y[7]},hovered:{text:y[2],background:y[7]},selected:{text:y[2],background:y[8]},disabled:{text:y[5],background:y[7]},shadow:y[8],border:y[7],sideMenu:y[4],highlightColors:{gray:{text:"#bebdb8",background:"#9b9a97"},brown:{text:"#8e6552",background:"#64473a"},red:{text:"#ec4040",background:"#be3434"},orange:{text:"#e3790d",background:"#b7600a"},yellow:{text:"#dfab01",background:"#b58b00"},green:{text:"#6b8b87",background:"#4d6461"},blue:{text:"#0e87bc",background:"#0b6e99"},purple:{text:"#8552d7",background:"#6940a5"},pink:{text:"#da208f",background:"#ad1a72"}}},borderRadius:$.borderRadius,fontFamily:$.fontFamily};function Mn(e){var u;const{classes:n}=v.createStyles({root:{}})(void 0,{name:"Editor"}),{editor:o,children:i,className:f,...s}=e;return r.jsx(ne.EditorContent,{editor:(u=e.editor)==null?void 0:u._tiptapEditor,className:w.mergeCSSClasses(n.root,e.className||""),...s,children:e.children||r.jsxs(r.Fragment,{children:[r.jsx(Xe,{editor:e.editor}),r.jsx(Ze,{editor:e.editor}),r.jsx(ct,{editor:e.editor}),r.jsx(at,{editor:e.editor})]})})}function jn(e){const{theme:n={light:$,dark:xe},...o}=e,i=Nt.default(),f=l.useMemo(()=>n==="light"?Z($):n==="dark"?Z(xe):"light"in n&&"dark"in n?Z(n[i==="dark"?"dark":"light"]):Z(n),[i,n]);return r.jsx(v.MantineProvider,{theme:f,children:r.jsx(Mn,{...o})})}const En={Heading:{group:"Headings",icon:r.jsx(_e,{size:18}),hint:"Used for a top-level heading",shortcut:I("Mod-Alt-1")},"Heading 2":{group:"Headings",icon:r.jsx(Re,{size:18}),hint:"Used for key sections",shortcut:I("Mod-Alt-2")},"Heading 3":{group:"Headings",icon:r.jsx(Ie,{size:18}),hint:"Used for subsections and group headings",shortcut:I("Mod-Alt-3")},"Numbered List":{group:"Basic blocks",icon:r.jsx(Oe,{size:18}),hint:"Used to display a numbered list",shortcut:I("Mod-Alt-7")},"Bullet List":{group:"Basic blocks",icon:r.jsx(Ae,{size:18}),hint:"Used to display an unordered list",shortcut:I("Mod-Alt-9")},Paragraph:{group:"Basic blocks",icon:r.jsx(ge,{size:18}),hint:"Used for the body of your document",shortcut:I("Mod-Alt-0")}};function ut(e=w.defaultBlockSchema){return w.getDefaultSlashMenuItems(e).map(o=>({...o,...En[o.name]}))}const pn=e=>new w.BlockNoteEditor({slashMenuItems:ut(e.blockSchema||w.defaultBlockSchema),...e}),wn=(e={},n=[])=>{const o=l.useRef();return l.useMemo(()=>(o.current&&o.current._tiptapEditor.destroy(),o.current=pn(e),o.current),n)};function Hn(){const[,e]=l.useState(0);return()=>e(n=>n+1)}const zn=e=>{const n=Hn();l.useEffect(()=>{const o=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})};return e.on("transaction",o),()=>{e.off("transaction",o)}},[e])},dt=l.createContext({}),Bn=e=>{const n=l.useContext(dt).inlineContent||{},o=w.mergeCSSClasses(e.className||"",w.blockStyles.inlineContent,n.class);return r.jsx(ne.NodeViewContent,{...Object.fromEntries(Object.entries(n).filter(([i])=>i!=="class")),...e,className:o})};function _n(e){return{node:w.createTipTapBlock({name:e.type,content:e.containsInlineContent?"inline*":"",selectable:e.containsInlineContent,addAttributes(){return w.propsToAttributes(e)},parseHTML(){return w.parse(e)},renderHTML({HTMLAttributes:o}){return w.render(e,o)},addNodeView(){const o=i=>{var W;const f=e.render,s=((W=this.options.domAttributes)==null?void 0:W.blockContent)||{},u={};for(const[N,oe]of Object.entries(i.node.attrs))N in e.propSchema&&oe!==e.propSchema[N].default&&(u[w.camelToDataKebab(N)]=oe);const g=this.options.editor,d=typeof i.getPos=="function"?i.getPos():void 0,E=g._tiptapEditor.state.doc.resolve(d).node().attrs.id,D=g.getBlock(E);if(D.type!==e.type)throw new Error("Block type does not match");return r.jsx(ne.NodeViewWrapper,{...Object.fromEntries(Object.entries(s).filter(([N])=>N!=="class")),className:w.mergeCSSClasses(w.blockStyles.blockContent,s.class),"data-content-type":e.type,...u,children:r.jsx(dt.Provider,{value:this.options.domAttributes||{},children:r.jsx(f,{block:D,editor:g})})})};return ne.ReactNodeViewRenderer(o,{className:w.blockStyles.reactNodeViewRenderer})}}),propSchema:e.propSchema}}h.AddBlockButton=$e,h.BlockColorsButton=nt,h.BlockNoteView=jn,h.BlockTypeDropdown=Le,h.ColorStyleButton=Ue,h.CreateLinkButton=Ke,h.DefaultDragHandleMenu=rt,h.DefaultFormattingToolbar=Je,h.DefaultSideMenu=it,h.DefaultSlashMenu=st,h.DragHandle=ot,h.DragHandleMenu=et,h.DragHandleMenuItem=me,h.FormattingToolbarPositioner=Xe,h.HyperlinkToolbarPositioner=Ze,h.InlineContent=Bn,h.NestBlockButton=We,h.RemoveBlockButton=tt,h.SideMenu=Qe,h.SideMenuButton=be,h.SideMenuPositioner=at,h.SlashMenuItem=lt,h.SlashMenuPositioner=ct,h.TextAlignButton=re,h.ToggledStyleButton=Q,h.Toolbar=fe,h.ToolbarButton=R,h.ToolbarDropdown=Pe,h.UnnestBlockButton=qe,h.blockNoteToMantineTheme=Z,h.createReactBlockSpec=_n,h.darkDefaultTheme=xe,h.defaultBlockTypeDropdownItems=Fe,h.defaultColorScheme=y,h.getDefaultReactSlashMenuItems=ut,h.lightDefaultTheme=$,h.useBlockNote=wn,h.useEditorContentChange=U,h.useEditorForceUpdate=zn,h.useEditorSelectionChange=L,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=blocknote-react.umd.cjs.map
